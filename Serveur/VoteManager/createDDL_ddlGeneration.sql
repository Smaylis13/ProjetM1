CREATE TABLE utilisateur (ID_UTILISATEUR INTEGER AUTO_INCREMENT NOT NULL, MAIL VARCHAR(255) NOT NULL UNIQUE, PRENOM VARCHAR(255) NOT NULL, NOM VARCHAR(255) NOT NULL, MOT_DE_PASSE VARCHAR(255) NOT NULL, PRIMARY KEY (ID_UTILISATEUR))
CREATE TABLE vote (ID_VOTE INTEGER AUTO_INCREMENT NOT NULL, DATE_DEBUT_VOTE DATE, DATE_FIN_VOTE DATE, DESCRIPTION_VOTE VARCHAR(255), STATUT_VOTE TINYINT(1) default 0, NOM_VOTE VARCHAR(255), ID_UTILISATEUR INTEGER, ID_TYPE INTEGER, PRIMARY KEY (ID_VOTE))
CREATE TABLE resultat (ID_RESULTAT INTEGER AUTO_INCREMENT NOT NULL, ORDRE INTEGER, ID_VOTE INTEGER, ID_CANDIDAT INTEGER, PRIMARY KEY (ID_RESULTAT))
CREATE TABLE type (ID_TYPE INTEGER AUTO_INCREMENT NOT NULL, DESCRIPTION_TYPE VARCHAR(255) NOT NULL, NOM_TYPE VARCHAR(255) NOT NULL, PRIMARY KEY (ID_TYPE))
CREATE TABLE regle (ID_REGLE INTEGER AUTO_INCREMENT NOT NULL, DESCRIPTION_REGLE VARCHAR(255), PRIMARY KEY (ID_REGLE))
CREATE TABLE candidat (ID_CANDIDAT INTEGER AUTO_INCREMENT NOT NULL, DESCRIPTION_CANDIDAT VARCHAR(255), NOM_CANDIDAT VARCHAR(255), ID_VOTE INTEGER, PRIMARY KEY (ID_CANDIDAT))
CREATE TABLE participe (ID_PARTICIPATION INTEGER AUTO_INCREMENT NOT NULL, SCORE INTEGER, ID_CANDIDAT INTEGER, ID_UTILISATEUR INTEGER, ID_VOTE INTEGER, PRIMARY KEY (ID_PARTICIPATION))
CREATE TABLE groupe (ID_GROUPE INTEGER AUTO_INCREMENT NOT NULL, DESCRIPTION_GROUPE VARCHAR(255), NOM_GROUPE VARCHAR(255), PRIMARY KEY (ID_GROUPE))
CREATE TABLE delegue (ID_DELEGATION INTEGER AUTO_INCREMENT NOT NULL, ID_MANDATAIRE INTEGER, ID_UTILISATEUR INTEGER, ID_VOTE INTEGER, PRIMARY KEY (ID_DELEGATION))
CREATE TABLE a_contact (ID_UTILISATEUR INTEGER NOT NULL, ID_CONTACT INTEGER NOT NULL, PRIMARY KEY (ID_UTILISATEUR, ID_CONTACT))
CREATE TABLE appartient (ID_UTILISATEUR INTEGER NOT NULL, ID_GROUPE INTEGER NOT NULL, PRIMARY KEY (ID_UTILISATEUR, ID_GROUPE))
CREATE TABLE invitation (ID_UTILISATEUR INTEGER NOT NULL, ID_VOTE INTEGER NOT NULL, PRIMARY KEY (ID_UTILISATEUR, ID_VOTE))
CREATE TABLE parametre (ID_VOTE INTEGER NOT NULL, ID_REGLE INTEGER NOT NULL, PRIMARY KEY (ID_VOTE, ID_REGLE))
CREATE TABLE autorise (ID_TYPE INTEGER NOT NULL, ID_REGLE INTEGER NOT NULL, PRIMARY KEY (ID_TYPE, ID_REGLE))
ALTER TABLE utilisateur ADD CONSTRAINT UNQ_utilisateur_0 UNIQUE (MAIL)
ALTER TABLE type ADD CONSTRAINT UNQ_type_0 UNIQUE (NOM_TYPE)
ALTER TABLE regle ADD CONSTRAINT UNQ_regle_0 UNIQUE (DESCRIPTION_REGLE)
ALTER TABLE participe ADD CONSTRAINT UNQ_participe_0 UNIQUE (ID_VOTE, ID_UTILISATEUR, ID_CANDIDAT)
ALTER TABLE delegue ADD CONSTRAINT UNQ_delegue_0 UNIQUE (ID_UTILISATEUR, ID_MANDATAIRE, ID_VOTE)
ALTER TABLE vote ADD CONSTRAINT FK_vote_ID_UTILISATEUR FOREIGN KEY (ID_UTILISATEUR) REFERENCES utilisateur (ID_UTILISATEUR)
ALTER TABLE vote ADD CONSTRAINT FK_vote_ID_TYPE FOREIGN KEY (ID_TYPE) REFERENCES type (ID_TYPE)
ALTER TABLE resultat ADD CONSTRAINT FK_resultat_ID_VOTE FOREIGN KEY (ID_VOTE) REFERENCES vote (ID_VOTE)
ALTER TABLE resultat ADD CONSTRAINT FK_resultat_ID_CANDIDAT FOREIGN KEY (ID_CANDIDAT) REFERENCES candidat (ID_CANDIDAT)
ALTER TABLE candidat ADD CONSTRAINT FK_candidat_ID_VOTE FOREIGN KEY (ID_VOTE) REFERENCES vote (ID_VOTE)
ALTER TABLE participe ADD CONSTRAINT FK_participe_ID_UTILISATEUR FOREIGN KEY (ID_UTILISATEUR) REFERENCES utilisateur (ID_UTILISATEUR)
ALTER TABLE participe ADD CONSTRAINT FK_participe_ID_CANDIDAT FOREIGN KEY (ID_CANDIDAT) REFERENCES candidat (ID_CANDIDAT)
ALTER TABLE participe ADD CONSTRAINT FK_participe_ID_VOTE FOREIGN KEY (ID_VOTE) REFERENCES vote (ID_VOTE)
ALTER TABLE delegue ADD CONSTRAINT FK_delegue_ID_VOTE FOREIGN KEY (ID_VOTE) REFERENCES vote (ID_VOTE)
ALTER TABLE delegue ADD CONSTRAINT FK_delegue_ID_UTILISATEUR FOREIGN KEY (ID_UTILISATEUR) REFERENCES utilisateur (ID_UTILISATEUR)
ALTER TABLE delegue ADD CONSTRAINT FK_delegue_ID_MANDATAIRE FOREIGN KEY (ID_MANDATAIRE) REFERENCES utilisateur (ID_UTILISATEUR)
ALTER TABLE a_contact ADD CONSTRAINT FK_a_contact_ID_CONTACT FOREIGN KEY (ID_CONTACT) REFERENCES utilisateur (ID_UTILISATEUR)
ALTER TABLE a_contact ADD CONSTRAINT FK_a_contact_ID_UTILISATEUR FOREIGN KEY (ID_UTILISATEUR) REFERENCES utilisateur (ID_UTILISATEUR)
ALTER TABLE appartient ADD CONSTRAINT FK_appartient_ID_GROUPE FOREIGN KEY (ID_GROUPE) REFERENCES groupe (ID_GROUPE)
ALTER TABLE appartient ADD CONSTRAINT FK_appartient_ID_UTILISATEUR FOREIGN KEY (ID_UTILISATEUR) REFERENCES utilisateur (ID_UTILISATEUR)
ALTER TABLE invitation ADD CONSTRAINT FK_invitation_ID_UTILISATEUR FOREIGN KEY (ID_UTILISATEUR) REFERENCES utilisateur (ID_UTILISATEUR)
ALTER TABLE invitation ADD CONSTRAINT FK_invitation_ID_VOTE FOREIGN KEY (ID_VOTE) REFERENCES vote (ID_VOTE)
ALTER TABLE parametre ADD CONSTRAINT FK_parametre_ID_REGLE FOREIGN KEY (ID_REGLE) REFERENCES regle (ID_REGLE)
ALTER TABLE parametre ADD CONSTRAINT FK_parametre_ID_VOTE FOREIGN KEY (ID_VOTE) REFERENCES vote (ID_VOTE)
ALTER TABLE autorise ADD CONSTRAINT FK_autorise_ID_TYPE FOREIGN KEY (ID_TYPE) REFERENCES type (ID_TYPE)
ALTER TABLE autorise ADD CONSTRAINT FK_autorise_ID_REGLE FOREIGN KEY (ID_REGLE) REFERENCES regle (ID_REGLE)
